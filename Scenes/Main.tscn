[gd_scene load_steps=9 format=3 uid="uid://wn6bh748pp4d"]

[ext_resource type="Script" path="res://Scripts/main.gd" id="1_jkbf0"]
[ext_resource type="PackedScene" uid="uid://ctva5guewuuo1" path="res://Scenes/Prefabs/camera_2d.tscn" id="2_2bkea"]
[ext_resource type="Script" path="res://Scripts/artefact_holder.gd" id="3_fd7s2"]
[ext_resource type="Texture2D" uid="uid://juuvbamrwelu" path="res://Sprites/Character__Artifact_sheet_1.png" id="4_ah4j8"]
[ext_resource type="PackedScene" uid="uid://dtp464wsu5344" path="res://Scenes/Managers/progress_manager.tscn" id="5_uxdm6"]

[sub_resource type="AtlasTexture" id="AtlasTexture_so2o3"]
atlas = ExtResource("4_ah4j8")
region = Rect2(16, 16, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_5h78y"]
atlas = ExtResource("4_ah4j8")
region = Rect2(16, 64, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_8cxo0"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_so2o3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5h78y")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Main" type="Node2D"]
script = ExtResource("1_jkbf0")

[node name="Camera2D" parent="." instance=ExtResource("2_2bkea")]
position = Vector2(288, 160)
anchor_mode = 1
zoom = Vector2(2, 2.025)

[node name="Menu" type="Node2D" parent="."]

[node name="TitleLabel" type="RichTextLabel" parent="Menu"]
texture_filter = 1
offset_left = 256.0
offset_top = 32.0
offset_right = 320.0
offset_bottom = 88.0
text = "Grid Game"
fit_content = true

[node name="Level1Button" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 352.0
offset_top = 32.0
offset_right = 464.0
offset_bottom = 80.0
focus_neighbor_left = NodePath("../RealTestLevelButton")
focus_neighbor_bottom = NodePath("../Level3Button")
text = "Level 1"

[node name="Level5Button" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 354.0
offset_top = 222.0
offset_right = 466.0
offset_bottom = 270.0
focus_neighbor_left = NodePath("../QuitButton")
focus_neighbor_top = NodePath("../Level4Button")
text = "Level 5 (canon)"

[node name="Level4Button" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 348.0
offset_top = 163.0
offset_right = 460.0
offset_bottom = 211.0
focus_neighbor_left = NodePath("../QuitButton")
focus_neighbor_top = NodePath("../Level3Button")
focus_neighbor_bottom = NodePath("../Level5Button")
text = "Level 4"

[node name="Level3Button" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 346.0
offset_top = 96.0
offset_right = 458.0
offset_bottom = 144.0
focus_neighbor_left = NodePath("../VirtualTestLevelButton")
focus_neighbor_top = NodePath("../Level1Button")
focus_neighbor_bottom = NodePath("../Level4Button")
text = "Level 3 (le meilleur level)"

[node name="VirtualTestLevelButton" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 32.0
offset_top = 96.0
offset_right = 173.0
offset_bottom = 144.0
focus_neighbor_top = NodePath("../RealTestLevelButton")
focus_neighbor_right = NodePath("../Level3Button")
focus_neighbor_bottom = NodePath("../ResetProgress")
text = "Virtual Test Level"

[node name="RealTestLevelButton" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 32.0
offset_top = 32.0
offset_right = 155.0
offset_bottom = 80.0
focus_neighbor_right = NodePath("../Level1Button")
focus_neighbor_bottom = NodePath("../VirtualTestLevelButton")
text = "Real Test Level"

[node name="QuitButton" type="Button" parent="Menu"]
texture_filter = 1
offset_left = 224.0
offset_top = 224.0
offset_right = 336.0
offset_bottom = 272.0
focus_neighbor_left = NodePath("../ResetProgress")
focus_neighbor_right = NodePath("../Level5Button")
text = "Quit"

[node name="ResetProgress" type="Button" parent="Menu"]
offset_left = 32.0
offset_top = 232.0
offset_right = 158.0
offset_bottom = 263.0
focus_neighbor_top = NodePath("../VirtualTestLevelButton")
focus_neighbor_right = NodePath("../QuitButton")
text = "Reset Progress"

[node name="ArtefactHolder" type="Node2D" parent="."]
z_index = 30
script = ExtResource("3_fd7s2")

[node name="GlovesSprite" type="AnimatedSprite2D" parent="ArtefactHolder"]
visible = false
position = Vector2(96, 288)
scale = Vector2(1.17, 1.17)
sprite_frames = SubResource("SpriteFrames_8cxo0")

[node name="ProgressManager" parent="." instance=ExtResource("5_uxdm6")]

[connection signal="pressed" from="Menu/Level1Button" to="." method="call_level" binds= [1]]
[connection signal="pressed" from="Menu/Level5Button" to="." method="call_level" binds= [5]]
[connection signal="pressed" from="Menu/Level4Button" to="." method="call_level" binds= [4]]
[connection signal="pressed" from="Menu/Level3Button" to="." method="call_level" binds= [3]]
[connection signal="pressed" from="Menu/VirtualTestLevelButton" to="." method="call_test_level" binds= ["virtual"]]
[connection signal="pressed" from="Menu/RealTestLevelButton" to="." method="call_test_level" binds= ["real"]]
[connection signal="pressed" from="Menu/QuitButton" to="." method="call_quit"]
[connection signal="pressed" from="Menu/ResetProgress" to="ProgressManager" method="reset_programs"]
